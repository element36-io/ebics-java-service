## Run unit tests

![Coverage](.github/badges/jacoco.svg)

Run tests for the ebics-java-client on linux - it mounts sources into a docker container with java and the maven build tool - 
so you do not need to install java or gradle on your local machine: 

    git clone  https://github.com/element36-io/ebics-java-service.git
    cd ebics-java-service; mkdir ./app;
    docker run -it -v $PWD:/app -w /app  gradle:6-jdk8-hotspot gradle test
    
On your host machine, test results are stored `./build/reports/tests/test/index.html`, test documents are stored in `./out`. With minimum Java 8 and Maven run tests on your host machine with `gradle test`, again see `./build/reports/tests/test/index.html` for test results.

See [here](https://github.com/element36-io/ebics-java-client/blob/master/README.md) how to run tests on ebics-java-client. 

## Test API manually

    docker run -p 8093:8093 e36io/ebics-service

or with existing Ebics configuration

    docker run -p 8093:8093 -v $HOME/ebics:/root/ebics  e36io/ebics-service

or with existing Ebics configuration and in production mode 

    docker run -p 8093:8093 -v $HOME/ebics:/root/ebics --env spring.profiles.active=prod e36io/ebics-service


Open [Swagger](http://localhost:8093/ebics/swagger-ui/?url=/ebics/v2/api-docs/) in your 
browser and test the API. Ony if you set the image to production mode, it will 
try co connect with your bank. In dev mode it will log its commands and generated 
documents. You may check and download the payment document (ebics document) under `./app`
which can be tested manually against your bank. To set up and connect to your banks 
Ebics API you need to [switch to productive spring boot
profile](https://www.baeldung.com/spring-profiles) by using `export spring_profiles_active=prod`. 


### Test  `/ebics/api-v1/simulate' 

Create a test transaction - send funds form your bank account to somebody else. 
The result shows the Ebics file generated by the request. 
You may test this file with your bank prior to activating Ebics: Many
banks offer buld-upload function which read Camt.053 format via web-interface. 

Same behaviour in dev and prod environment. 

### Test  `/ebics/api-v1/bankstatements' 

Retrieves bank statement and translates Camt.053 format to Json. 

In dev mode you see the command which is issued to query the daily statement. 

### Test  `/ebics/api-v1/unpeg' 

Create a tarnsaction with your pegging account configured in `ebics.pegging.account`. 
:warning: In prod mode it sends real money - in dev mode it shows the command and the Ebics document in the result. 

### Test  `/ebics/api-v1/paymentstatus'

Check status of a transaction with command Z01. In dev mode you see the command which is issued to query the status of the transaction.

### Test  `/ebics/api-v1/create'

At your bank you can have more than one bank account. The Ebics interface allows you to access all of them at once: 
Daily statements will cover transactions of all accounts - and you can create new transactions from any bank account 
from the Ebics interface. 



